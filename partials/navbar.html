<header class="sticky top-0 z-50 bg-white/80 backdrop-blur-md border-b border-gray-200/50">
  <nav class="section-container">
    <div class="flex justify-between items-center h-20">
      <!-- Logo -->
      <div class="flex-shrink-0">
        <a href="" class="flex items-center" id="logo-link">
          <img src="/src/assets/images/df-logo.svg" alt="Digital Foundry" class="h-10" />
        </a>
      </div>

      <!-- Desktop Navigation -->
      <div id="desktop-nav" class="hidden lg:flex items-center space-x-8">
        <!-- Nav links injected by JS -->
      </div>

      <!-- Mobile menu button -->
      <button
        id="mobile-menu-button"
        type="button"
        class="lg:hidden inline-flex items-center justify-center p-2 rounded-md text-df-body hover:text-df-dark hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-df-dark"
        aria-expanded="false"
        aria-controls="mobile-menu"
        aria-label="Toggle navigation menu"
      >
        <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
        </svg>
      </button>
    </div>

    <!-- Fallback navigation for no-JS users -->
    <noscript>
      <div class="lg:flex hidden items-center space-x-8">
        <a href="pages/outcomes.html" class="nav-link">Outcomes</a>
        <a href="pages/ai.html" class="nav-link">AI</a>
        <a href="pages/inside-df.html" class="nav-link">Inside DF</a>
        <a href="pages/careers.html" class="nav-link">Careers</a>
        <a href="pages/perspectives.html" class="nav-link">Perspectives</a>
        <a href="index.html#contact" class="btn-primary">Book a consultation</a>
      </div>
      <div class="lg:hidden flex flex-col items-center space-y-6 pb-4">
        <a href="pages/outcomes.html" class="nav-link text-xl">Outcomes</a>
        <a href="pages/ai.html" class="nav-link text-xl">AI</a>
        <a href="pages/inside-df.html" class="nav-link text-xl">Inside DF</a>
        <a href="pages/careers.html" class="nav-link text-xl">Careers</a>
        <a href="pages/perspectives.html" class="nav-link text-xl">Perspectives</a>
        <a href="index.html#contact" class="btn-primary text-center">Book a consultation</a>
      </div>
    </noscript>
  </nav>
</header>

<!-- Mobile Navigation (fullscreen overlay â€” outside header to avoid clipping) -->
<div id="mobile-menu" class="fixed inset-0 z-[60] bg-white/80 backdrop-blur-md flex-col hidden lg:hidden">
  <!-- Top bar: logo + close -->
  <div class="flex justify-between items-center h-20 px-4 sm:px-6 lg:px-8">
    <a href="" class="flex items-center" id="mobile-logo-link">
      <img src="/src/assets/images/df-logo.svg" alt="Digital Foundry" class="h-10" />
    </a>
    <button
      id="mobile-menu-close"
      type="button"
      class="p-2 rounded-md text-df-body hover:text-df-dark hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-df-dark"
      aria-label="Close navigation menu"
    >
      <svg class="h-7 w-7" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
      </svg>
    </button>
  </div>
  <!-- Centered nav links -->
  <div id="mobile-nav" class="flex flex-col items-center justify-center flex-1 space-y-6">
    <!-- Nav links injected by JS -->
  </div>
</div>

<script>
  // Detect if we're in pages/ or perspectives/ subdirectory
  const isInPages = location.pathname.includes('/pages/')
  const isInPerspectives = location.pathname.includes('/perspectives/')

  // Base path for navigation (empty for root, '../' for subdirectories)
  const basePath = isInPages || isInPerspectives ? '../' : ''

  // Update logo links
  document.getElementById('logo-link').href = basePath + 'index.html'
  const mobileLogo = document.getElementById('mobile-logo-link')
  if (mobileLogo) mobileLogo.href = basePath + 'index.html'

  // Single source of truth for navigation
  const NAV_LINKS = [
    { href: basePath + 'pages/outcomes.html', label: 'Outcomes', key: 'outcomes' },
    { href: basePath + 'pages/ai.html', label: 'AI', key: 'ai' },
    { href: basePath + 'pages/inside-df.html', label: 'Inside DF', key: 'inside-df' },
    { href: basePath + 'pages/careers.html', label: 'Careers', key: 'careers' },
    { href: basePath + 'pages/perspectives.html', label: 'Perspectives', key: 'perspectives' },
  ]

  // Render nav links to both desktop and mobile containers
  const desktopContainer = document.getElementById('desktop-nav')
  const mobileContainer = document.getElementById('mobile-nav')

  NAV_LINKS.forEach((link) => {
    // Desktop link
    const desktopLink = document.createElement('a')
    desktopLink.href = link.href
    desktopLink.setAttribute('data-nav', link.key)
    desktopLink.className = 'nav-link'
    desktopLink.textContent = link.label
    desktopContainer.appendChild(desktopLink)

    // Mobile link
    const mobileLink = document.createElement('a')
    mobileLink.href = link.href
    mobileLink.setAttribute('data-nav', link.key)
    mobileLink.className = 'nav-link text-xl'
    mobileLink.textContent = link.label
    mobileContainer.appendChild(mobileLink)
  })

  // Add CTA button to desktop
  const ctaDesktop = document.createElement('a')
  ctaDesktop.href = basePath + '#contact'
  ctaDesktop.setAttribute('data-nav', 'contact')
  ctaDesktop.className = 'btn-primary'
  ctaDesktop.textContent = 'Book a consultation'
  desktopContainer.appendChild(ctaDesktop)

  // Add CTA button to mobile
  const ctaMobile = document.createElement('a')
  ctaMobile.href = basePath + '#contact'
  ctaMobile.setAttribute('data-nav', 'contact')
  ctaMobile.className = 'btn-primary text-center'
  ctaMobile.textContent = 'Book a consultation'
  mobileContainer.appendChild(ctaMobile)
</script>
